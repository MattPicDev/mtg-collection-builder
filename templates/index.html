{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1>Magic: The Gathering Collection Tool</h1>
        <p class="lead">Select a set to start adding cards to your collection</p>
    </div>
</div>

<div class="row">
    <div class="col-md-4 mb-3">
        <input type="text" id="setSearch" class="form-control" placeholder="Search sets..." onkeyup="filterSets()">
    </div>
    <div class="col-md-8">
        <div class="alert alert-info">
            <i class="fas fa-info-circle"></i>
            Click on a set to view its cards and add them to your collection. Use the search box to quickly find specific sets.
        </div>
    </div>
</div>

<div class="row" id="setsContainer">
    {% for set in sets %}
    <div class="col-md-4 col-lg-3 mb-4 set-item" data-set-name="{{ set.name|lower }}" data-set-code="{{ set.code|lower }}">
        <div class="card set-card h-100">
            {% if set.icon_svg_uri %}
            <div class="card-header text-center">
                <img src="{{ set.icon_svg_uri }}" alt="{{ set.name }}" style="width: 24px; height: 24px;">
            </div>
            {% endif %}
            <div class="card-body">
                <h6 class="card-title">{{ set.name }}</h6>
                <p class="card-text">
                    <small class="text-muted">
                        Code: {{ set.code|upper }}<br>
                        Released: {{ set.released_at }}<br>
                        Cards: {{ set.card_count }}
                    </small>
                </p>
                <a href="/set/{{ set.code }}" class="btn btn-primary btn-sm">
                    <i class="fas fa-plus"></i> Add Cards
                </a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block scripts %}
<script>
function filterSets() {
    const search = document.getElementById('setSearch').value.toLowerCase();
    const setItems = document.querySelectorAll('.set-item');
    
    setItems.forEach(item => {
        const setName = item.getAttribute('data-set-name');
        const setCode = item.getAttribute('data-set-code');
        
        if (setName.includes(search) || setCode.includes(search)) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
}
</script>
{% endblock %}
